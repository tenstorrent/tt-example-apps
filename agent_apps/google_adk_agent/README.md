# ðŸ”¤ Google ADK Text Agent
This is a demo app that creates an agent using the [**Google Agent Development Kit (ADK)**](https://google.github.io/adk-docs/) to manipulate text with various functions.  It demonstrates how to use tools with a **Google ADK** agent, while running all the LLM inference on **Tenstorrent** hardware.  The UI is generated by **Google ADK**, which also displays details about tool calls on each user query.

This example requires an active Tenstorrent instance running on Koyeb.  To deploy your first service using Tenstorrent instances on Koyeb, refer to Koyeb's [tenstorrent-examples repository](https://github.com/koyeb/tenstorrent-examples).  

> **_NOTE:_** Automatic tool calling must be enabled on the instance's vLLM server for this demo to work.  Please refer to [vLLM's Tool Calling docs](https://docs.vllm.ai/en/stable/features/tool_calling.html#automatic-function-calling) for the required flags.  One-click deploy models will have these flags enabled if the LLM supports tool calling. (i.e. Llama and Qwen models)

## Demo

https://github.com/user-attachments/assets/632788cd-ea3b-4d07-aec1-318c8bed537d

## Getting started

### 1. Clone the GitHub repository
```bash
git clone https://github.com/tenstorrent/tt-example-apps.git
cd tt-example-apps/agent_apps/google_adk_agent
```

### 2. Create a virtual environment and install the required dependencies
```bash
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
```

### 3. Update [`agent.py`](./text_agent/agent.py) with your Tenstorrent instance URL and model ID
```python
# Update TT/Koyeb base url and model ID below
# ---------------------------------------------------------
tt_base_url = "https://<...>.koyeb.app/v1"
model_id = "hosted_vllm/..."
# ---------------------------------------------------------
```
> **NOTE:**
  >* `tt_base_url` must end with `/v1`
  >* `model_id` must start with `"hosted_vllm/"`.  This indicates to Google ADK that the model is running on a remote vLLM server.  For example, `model_id = "hosted_vllm/meta-llama/Llama-3.1-8B-Instruct"`

### 4. Ensure your current directory is `tt-example-apps/agent_apps/google_adk_agent` and run the app
```bash
adk web
```

A message similar to the following should be printed on the screen.  Open the ADK Web Server in your browser.
```
+-----------------------------------------------------------------------------+
| ADK Web Server started                                                      |
|                                                                             |
| For local testing, access at http://localhost:8000.                         |
+-----------------------------------------------------------------------------+

INFO:     Application startup complete.
INFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)
```

## How it works

- Three functions are defined: `count_words`, `reverse_text`, and `count_characters`.  These are used as available tools for the agent.
- A **Google ADK Agent** is created that uses a custom **LiteLlm** client that points to the **Tenstorrent** instance endpoint as the base URL.
- **Google ADK** handles the function calls and feeding the context back to the model.
- The ADK web server shows conversation history, details of tool calls, and live events while the model is running.
